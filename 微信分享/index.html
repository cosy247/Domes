<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
        <script src="http://res.wx.qq.com/open/js/jweixin-1.6.0.js"></script>
        <script src="./js/sha1.js"></script>
    </head>
    <body></body>

    <script>
        // 获取Access token {"access_token":"ACCESS_TOKEN","expires_in":7200}
        // https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=wx8f6343e976dfba3a&secret=336a3a694738cdfce480cc65101c2ae1

        api.get('')

        // 获取jsapi_ticket
        /**
         * {
                "errcode":0,
                "errmsg":"ok",
                "ticket":"bxLdikRXVbTPdHSM05e5u5sUoXNKd8-41ZO3MhKoyN5OfkWITDGgnr2fwJ0m9E8NYzWKVZvdVtaUgWvsdshFKA",
                "expires_in":7200
            }
         */
        // https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token=ACCESS_TOKEN&type=jsapi
        const timestamp = Date.now();
        const nonceStr = 'juaasdgasdg';
        const signature = sha1(`noncestr=${nonceStr}&jsapi_ticket=${jsapi_ticket}&timestamp=${timestamp}&url=${url}`);

        wx.config({
            debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
            appId: 'wx8f6343e976dfba3a', // 必填，公众号的唯一标识
            timestamp, // 必填，生成签名的时间戳
            nonceStr, // 必填，生成签名的随机串
            signature, // 必填，签名
            jsApiList: ['onMenuShareAppMessage'], // 必填，需要使用的JS接口列表
        });
        wx.ready(function () {
            // 自定义“分享到朋友圈”
            // wx.onMenuShareTimeline({
            //     title: title,
            //     link: link,
            //     imgUrl: imgUrl,
            //     success: function () {},
            //     cancel: function () {},
            // });
            // 自定义“分享到QQ空间”
            // wx.onMenuShareQZone({
            //     title: title,
            //     desc: desc,
            //     link: link,
            //     imgUrl: imgUrl,
            //     success: function () {},
            //     cancel: function () {},
            // });
            // 自定义“分享给微信好友”
            wx.onMenuShareAppMessage({
                title: 'title',
                desc: 'desc',
                link: 'link',
                imgUrl: 'imgUrl',
                success: function () {},
                cancel: function () {},
            });
            // 自定义分享给QQ好友”
            // wx.onMenuShareQQ({
            //     title: title,
            //     desc: desc,
            //     link: link,
            //     imgUrl: imgUrl,
            //     success: function () {},
            //     cancel: function () {},
            // });
        });
    </script>
</html>
